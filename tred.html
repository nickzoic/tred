<html>
  <head> 
    <meta charset="UTF-8">
    <script id="template" type="text/ractive">
      <div class="tred">
        {{#root}}
          {{>value}}
        {{/root}}

        {{#partial value}}
          {{#if Array.isArray(this)}}
            <table class="array">
              {{#.}}
		<tr>
		  <th>{{@index}}</th>
		  <td>{{>value}}</td>
                </tr>
              {{/}}
            </table>
          {{elseif this instanceof Object}}
            <table class="object">
              {{#this:_}}
		<tr>
		  <th contendeditable="true">{{@key}}</th>
		  <td>{{>value}}</td>
                </tr>
              {{/}}
            </table>
          {{elseif typeof this == 'number'}}
	    <div class="number" contenteditable="true">{{this}}</div>
          {{elseif this === true || this === false || this === null}}
	    <div class="{{ ""+this }}">{{ ""+this }}</div>
          {{else}}
	    <div class="string" contenteditable="true">{{ this }}</div>
          {{/if}}
        {{/partial}}
      </div>
    </script>
    <script src="https://cdn.jsdelivr.net/npm/ractive"></script>

    <style type="text/css">
      table.array {
	border: 1px dotted blue;
      }
      table.array > tr > th {
	color: blue;
      }
      table.object {
	border: 1px dotted red;
      }
      table.object > tr > th {
	color: red;
      }
      .number {
	color: purple;
      }
      .true, .false, .null {
	color: green;
      }
      th {
	vertical-align: top;
      }
      #debug {
	border: 1px dotted black;
      }
    </style>
  </head>
  <body>
    <h1>"tred" JSON example ...</h1>
    <p>
        At the moment, all this is doing is translating the template context (JSON) into 
        a pretty DOM-tree format. What is needs next is mouse and key bindings to let you
        manipulate the document ...
    </p>
    <div id="root"><pre>
    {
       "title": "example JSON document",
       "array": [ "this", "is", "an", "array" ],
       "object": { "objects": "look", "like": "this", "and": [ "they", "can", "nest" ] },
       "number": 42,
       "not a number": "42",
       "special stuff": [ true, false, null ]
    }
    </pre></div>

    <p>
        The document is manipulated as a tree of JS objects which mirrors the tree of DOM
	objects. This is what it looks like serialized out as JSON again:
    </p>
    <pre id="debug"></pre>
    <p>
        Note that the template and stylesheet in this document are the only things which
	make tred specific to JSON.  JSON is a bit unusual in that the documents map directly
	on to Javascript data structures, but other document types can be parsed &amp;
	serialized ... I'd like to develop it for other languages / markups
	too.
    </p>
    <p>
        See <a href="http://nick.zoic.org/art/syntax-tree-editor/">Syntax Tree Editors</a>
	for more information.
    </p>
    <script src="tred.js"></script>
  </body>
</html>

